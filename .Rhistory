labs(x = "", y = "Price in KHR",
title = "Cambodia, key commodities")
lanka %>%
filter(pricetype == "Retail") %>%
filter(commodity %in% c("Wheat flour",
"Rice (long grain)",
"Rice (red nadu)",
"Sugar",
# "Fuel (diesel)",
"Fuel (petrol-gasoline)",
"Rice (white)")) %>%
country_price() +
labs(x = "", y = "Price in LKR",
title = "Sri Lanka, key commodities") +
prices %>%
filter(pricetype == "Retail") %>%
filter(commodity %in% c("Salt",
"Tomatoes (local)",
"Rice (low quality)",
"Pulses",
"Oil (palm)",
"Onions (local)")) %>%
country_price() +
labs(x = "", y = "Price in MMK",
title = "Myanmar, key commodities") +
cam %>%
filter(pricetype == "Retail") %>%
filter(commodity %in% c("Rice (mixed, low quality)",
"Meat (pork, with fat)",
"Oil (vegetable)",
"Wax gourd",
"Fish (snake head)",
"Cabbage (chinese, flowering)")) %>%
country_price() +
labs(x = "", y = "Price in KHR",
title = "Cambodia, key commodities")
lanka %>%
filter(pricetype == "Retail") %>%
filter(commodity %in% c("Wheat flour",
"Rice (long grain)",
"Rice (red nadu)",
"Sugar",
# "Fuel (diesel)",
"Fuel (petrol-gasoline)",
"Rice (white)")) %>%
country_price() +
labs(x = "", y = "Price in LKR",
title = "Sri Lanka, key commodities") +
prices %>%
filter(pricetype == "Retail") %>%
filter(commodity %in% c("Salt",
"Tomatoes (local)",
"Rice (low quality)",
"Pulses",
"Oil (palm)",
"Onions (local)")) %>%
country_price() +
labs(x = "", y = "Price in MMK",
title = "Myanmar, key commodities") +
cam %>%
filter(pricetype == "Retail") %>%
filter(commodity %in% c("Rice (mixed, low quality)",
"Meat (pork, with fat)",
"Oil (vegetable)",
"Wax gourd",
"Fish (snake head)",
"Cabbage (chinese, flowering)")) %>%
country_price() +
labs(x = "", y = "Price in KHR",
title = "Cambodia, key commodities") +
plot_layout(ncol = 1)
country_price <- function(tbl) {
tbl %>%
group_by(date, commodity) %>%
summarise(price = mean(price)) %>%
arrange(date, commodity) %>%
group_by(commodity) %>%
mutate(mom = (price - lag(price)) / lag(price)) %>%
filter(!is.na(mom)) %>%
ggplot(aes(x = date, y = price)) +
geom_line(aes(colour = commodity)) +
labs(colour = "") +
scale_x_date(breaks = seq(from = as.Date("2003-01-01"),
to = as.Date("2022-06-01"),
by = "year"),
date_labels = "%Y")
}
lanka %>%
filter(pricetype == "Retail") %>%
filter(commodity %in% c("Wheat flour",
"Rice (long grain)",
"Rice (red nadu)",
"Sugar",
# "Fuel (diesel)",
"Fuel (petrol-gasoline)",
"Rice (white)")) %>%
country_price() +
labs(x = "", y = "Price in LKR",
title = "Sri Lanka, key commodities") +
prices %>%
filter(pricetype == "Retail") %>%
filter(commodity %in% c("Salt",
"Tomatoes (local)",
"Rice (low quality)",
"Pulses",
"Oil (palm)",
"Onions (local)")) %>%
country_price() +
labs(x = "", y = "Price in MMK",
title = "Myanmar, key commodities") +
cam %>%
filter(pricetype == "Retail") %>%
filter(commodity %in% c("Rice (mixed, low quality)",
"Meat (pork, with fat)",
"Oil (vegetable)",
"Wax gourd",
"Fish (snake head)",
"Cabbage (chinese, flowering)")) %>%
country_price() +
labs(x = "", y = "Price in KHR",
title = "Cambodia, key commodities") +
plot_layout(ncol = 1)
country_price <- function(tbl) {
tbl %>%
group_by(date, commodity) %>%
summarise(price = mean(price)) %>%
arrange(date, commodity) %>%
group_by(commodity) %>%
mutate(mom = (price - lag(price)) / lag(price)) %>%
filter(!is.na(mom)) %>%
ggplot(aes(x = date, y = price)) +
geom_line(aes(colour = commodity)) +
labs(colour = "") +
scale_x_date(breaks = seq(from = as.Date("2003-01-01"),
to = as.Date("2022-06-01"),
by = "year"),
date_labels = "%Y") +
theme(axis.text.x = element_text(angle = 30))
}
lanka %>%
filter(pricetype == "Retail") %>%
filter(commodity %in% c("Wheat flour",
"Rice (long grain)",
"Rice (red nadu)",
"Sugar",
# "Fuel (diesel)",
"Fuel (petrol-gasoline)",
"Rice (white)")) %>%
country_price() +
labs(x = "", y = "Price in LKR",
title = "Sri Lanka, key commodities") +
prices %>%
filter(pricetype == "Retail") %>%
filter(commodity %in% c("Salt",
"Tomatoes (local)",
"Rice (low quality)",
"Pulses",
"Oil (palm)",
"Onions (local)")) %>%
country_price() +
labs(x = "", y = "Price in MMK",
title = "Myanmar, key commodities") +
cam %>%
filter(pricetype == "Retail") %>%
filter(commodity %in% c("Rice (mixed, low quality)",
"Meat (pork, with fat)",
"Oil (vegetable)",
"Wax gourd",
"Fish (snake head)",
"Cabbage (chinese, flowering)")) %>%
country_price() +
labs(x = "", y = "Price in KHR",
title = "Cambodia, key commodities") +
plot_layout(ncol = 1)
country_price <- function(tbl) {
tbl %>%
group_by(date, commodity) %>%
summarise(price = mean(price)) %>%
arrange(date, commodity) %>%
group_by(commodity) %>%
mutate(mom = (price - lag(price)) / lag(price)) %>%
filter(!is.na(mom)) %>%
ggplot(aes(x = date, y = price)) +
geom_line(aes(colour = commodity)) +
labs(colour = "") +
scale_x_date(breaks = seq(from = as.Date("2003-01-01"),
to = as.Date("2022-06-01"),
by = "year"),
date_labels = "%Y") +
scale_y_continuous(labels = comma) +
theme(axis.text.x = element_text(angle = 30))
}
lanka %>%
filter(pricetype == "Retail") %>%
filter(commodity %in% c("Wheat flour",
"Rice (long grain)",
"Rice (red nadu)",
"Sugar",
# "Fuel (diesel)",
"Fuel (petrol-gasoline)",
"Rice (white)")) %>%
country_price() +
labs(x = "", y = "Price in LKR",
title = "Sri Lanka, key commodities") +
prices %>%
filter(pricetype == "Retail") %>%
filter(commodity %in% c("Salt",
"Tomatoes (local)",
"Rice (low quality)",
"Pulses",
"Oil (palm)",
"Onions (local)")) %>%
country_price() +
labs(x = "", y = "Price in MMK",
title = "Myanmar, key commodities") +
cam %>%
filter(pricetype == "Retail") %>%
filter(commodity %in% c("Rice (mixed, low quality)",
"Meat (pork, with fat)",
"Oil (vegetable)",
"Wax gourd",
"Fish (snake head)",
"Cabbage (chinese, flowering)")) %>%
country_price() +
labs(x = "", y = "Price in KHR",
title = "Cambodia, key commodities") +
plot_layout(ncol = 1)
cam %>%
price_plot()
cam %>%
count(commodity)
cam %>%
count(commodity, sort = TRUE)
cam %>%
filter(commodity == "Rice (mixed, low quality)") %>%
price_plot()  +
cam %>%
filter(commodity == "Meat (pork, with fat)") %>%
price_plot() +
cam %>%
filter(commodity == "Oil (vegetable)") %>%
price_plot() +
cam %>%
filter(commodity == "Wax gourd") %>%
price_plot() +
plot_layout(ncol = 2)
cam %>%
filter(commodity == "Wax gourd") %>%
price_plot() +
labs(title = "Cambodia wax gourd average price over time",
y = "Price in KHR")
cam %>%
filter(commodity == "Rice (mixed, low quality)") %>%
price_plot()  +
labs(title = "Cambodia rice (mixed, low quality), average price over time",
y = "Price in KHR") +
cam %>%
filter(commodity == "Meat (pork, with fat)") %>%
price_plot() +
labs(title = "Cambodia pork, with fat, average price over time",
y = "Price in KHR") +
cam %>%
filter(commodity == "Oil (vegetable)") %>%
price_plot() +
labs(title = "Cambodia vegetable oil, average price over time",
y = "Price in KHR") +
cam %>%
filter(commodity == "Wax gourd") %>%
price_plot() +
labs(title = "Cambodia wax gourd average price over time",
y = "Price in KHR") +
plot_layout(ncol = 2)
cam %>%
count(commodity, sort = TRUE)
cam %>%
filter(commodity == "Rice (mixed, low quality)") %>%
price_plot()  +
labs(title = "Cambodia rice (mixed, low quality), average price over time",
y = "Price in KHR") +
cam %>%
filter(commodity == "Meat (pork, with fat)") %>%
price_plot() +
labs(title = "Cambodia pork, with fat, average price over time",
y = "Price in KHR") +
cam %>%
filter(commodity == "Oil (vegetable)") %>%
price_plot() +
labs(title = "Cambodia vegetable oil, average price over time",
y = "Price in KHR") +
cam %>%
filter(commodity == "Wax gourd") %>%
price_plot() +
labs(title = "Cambodia wax gourd average price over time",
y = "Price in KHR") +
cam %>%
filter(commodity == "Fish (snake head)") %>%
price_plot() +
labs(title = "Cambodia snake head fish average price over time",
y = "Price in KHR") +
cam %>%
filter(commodity == "Cabbage (chinese, flowering)") %>%
price_plot() +
labs(title = "Cambodia chinese cabbage average price over time",
y = "Price in KHR") +
plot_layout(ncol = 2)
prices %>%
filter(str_detect(commodity, "Tomato")) %>%
price_plot() +
labs(title = "Tomatoes, mean price 2008 - 2012 and 2020 - 2022") +
prices %>%
filter(str_detect(commodity, "palm")) %>%
price_plot() +
labs(title = "Palm oil, mean price 2008 - 2022") +
prices %>%
filter(str_detect(commodity, "low quality")) %>%
price_plot() +
labs(title = "Rice (low quality), mean price 2008 - 2022") +
prices %>%
filter(str_detect(commodity, "Onions")) %>%
price_plot() +
labs(title = "Onions, mean price 2008 - 2012 and 2020 - 2022") +
prices %>%
filter(str_detect(commodity, "Pulses")) %>%
price_plot() +
labs(title = "Pulses, mean price 2012 - 2022") +
prices %>%
filter(str_detect(commodity, "Eggs")) %>%
price_plot() +
labs(title = "Eggs, mean price 2021 - 2022") +
plot_layout(ncol = 2) +
plot_annotation("Historical price trends of key commodities",
caption = "Sources: WFP and Mercy Corps MAU")
prices %>%
filter(str_detect(commodity,
"Eggs",
"Tomato")) %>%
arrange(date)
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date)
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date) %>%
select(date, commodity, price)
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date) %>%
select(date, commodity, price) %>%
group_by(date) %>%
mutate(duplicate = price / mean(price))
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date) %>%
select(date, commodity, price, market) %>%
group_by(date) %>%
mutate(duplicate = price / mean(price))
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date) %>%
select(date, commodity, price, market) %>%
group_by(date, market) %>%
mutate(duplicate = price / mean(price))
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date) %>%
select(date, commodity, price, market) %>%
group_by(date, market) %>%
mutate(duplicate = price - mean(price))
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date) %>%
select(date, commodity, price, market) %>%
group_by(date, market) %>%
mutate(duplicate = mean(price) - price)
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date) %>%
select(date, commodity, price, market) %>%
pivot_wider(names_from = commodity, values_from = price)
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date) %>%
select(date, commodity, price, market) %>%
pivot_wider(names_from = commodity, values_from = price) %>%
filter(!is.na(Tomatoes))
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date) %>%
select(date, commodity, price, market) %>%
pivot_wider(names_from = commodity, values_from = price) %>%
filter(is.na(Tomatoes))
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date) %>%
select(date, commodity, price, market) %>%
pivot_wider(names_from = commodity, values_from = price) %>%
filter(is.na(Tomatoes)) %>%
select(-Tomatoes)
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date) %>%
select(date, commodity, price, market) %>%
pivot_wider(names_from = commodity, values_from = price) %>%
filter(is.na(Tomatoes)) %>%
select(-Tomatoes) %>%
mutate(duplicate = ifelse(`Eggs (local)` == `Tomatoes (local)`,
TRUE,
FALSE))
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date) %>%
select(date, commodity, price, market) %>%
pivot_wider(names_from = commodity, values_from = price) %>%
filter(is.na(Tomatoes)) %>%
select(-Tomatoes) %>%
mutate(duplicate = ifelse(`Eggs (local)` == `Tomatoes (local)`,
TRUE,
FALSE)) %>%
filter(duplicate == TRUE)
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date) %>%
select(date, commodity, price, market) %>%
pivot_wider(names_from = commodity, values_from = price) %>%
filter(is.na(Tomatoes)) %>%
select(-Tomatoes) %>%
mutate(duplicate = ifelse(`Eggs (local)` == `Tomatoes (local)`,
TRUE,
FALSE)) %>%
filter(duplicate == FALSE)
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date) %>%
select(date, commodity, price, market) %>%
pivot_wider(names_from = commodity, values_from = price) %>%
filter(is.na(Tomatoes)) %>%
select(-Tomatoes) %>%
mutate(duplicate = ifelse(`Eggs (local)` == `Tomatoes (local)`,
TRUE,
FALSE)) %>%
filter(duplicate == TRUE)
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date) %>%
select(date, commodity, price, market) %>%
pivot_wider(names_from = commodity, values_from = price) %>%
filter(is.na(Tomatoes)) %>%
select(-Tomatoes) %>%
mutate(duplicate = ifelse(`Eggs (local)` == `Tomatoes (local)`,
TRUE,
FALSE)) %>%
write_csv("./data/egg_tomato_duplicates.csv")
prices %>%
filter(str_detect(commodity,
"Eggs|Tomato")) %>%
arrange(date) %>%
select(date, commodity, price, market) %>%
pivot_wider(names_from = commodity, values_from = price) %>%
filter(is.na(Tomatoes)) %>%
select(-Tomatoes) %>%
mutate(duplicate = ifelse(`Eggs (local)` == `Tomatoes (local)`,
TRUE,
FALSE))
cam %>%
filter(commodity == "Rice (mixed, low quality)") %>%
price_plot()  +
labs(title = "Cambodia rice (mixed, low quality), average price over time",
y = "Price in KHR") +
cam %>%
filter(commodity == "Meat (pork, with fat)") %>%
price_plot() +
labs(title = "Cambodia pork, with fat, average price over time",
y = "Price in KHR") +
cam %>%
filter(commodity == "Oil (vegetable)") %>%
price_plot() +
labs(title = "Cambodia vegetable oil, average price over time",
y = "Price in KHR") +
cam %>%
filter(commodity == "Wax gourd") %>%
price_plot() +
labs(title = "Cambodia wax gourd average price over time",
y = "Price in KHR") +
cam %>%
filter(commodity == "Fish (snake head)") %>%
price_plot() +
labs(title = "Cambodia snake head fish average price over time",
y = "Price in KHR") +
cam %>%
filter(commodity == "Cabbage (chinese, flowering)") %>%
price_plot() +
labs(title = "Cambodia chinese cabbage average price over time",
y = "Price in KHR") +
plot_layout(ncol = 2) +
plot_annotation("Cambodia -- historical price trends of key commodities",
caption = "Source: WFP")
