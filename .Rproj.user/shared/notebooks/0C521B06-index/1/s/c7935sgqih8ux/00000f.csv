"0","prices <- read_csv(""./data/wfp_food_prices_mmr.csv"") %>% "
"0","  filter(!row_number() %in% c(1)) %>% "
"0","  mutate_at(vars(longitude, latitude, price, usdprice),"
"0","            ~ as.numeric(.x)) %>% "
"0","  mutate(date = ymd(date), "
"0","         year = year(date)) %>% "
"0","  mutate(source = ""WFP"")"
"0",""
"0","lanka <- read_csv(""./data/wfp_food_prices_lka.csv"") %>% "
"0","  filter(!row_number() %in% c(1)) %>% "
"0","  mutate_at(vars(longitude, latitude, price, usdprice),"
"0","            ~ as.numeric(.x)) %>% "
"0","  mutate(date = ymd(date), "
"0","         year = year(date)) %>% "
"0","  mutate(source = ""WFP"")"
"0",""
"0","cam <- read_csv(""./data/wfp_food_prices_khm.csv"") %>% "
"0","  filter(!row_number() %in% c(1)) %>% "
"0","  mutate_at(vars(longitude, latitude, price, usdprice),"
"0","            ~ as.numeric(.x)) %>% "
"0","  mutate(date = ymd(date), "
"0","         year = year(date)) %>% "
"0","  mutate(source = ""WFP"")"
"0",""
"0","# I wish I could do this whole process with something like"
"0","# mau <- dir(""data, full.names = TRUE) %>% map_df(read_csv)"
"0","# But unfortunately, these files require some cleaning "
"0",""
"0","mau_files <- list.files(""./data/mpr_se_data"")"
"0",""
"0","# Empty vector to store results "
"0",""
"0","mau_list <- vector(""list"", length(mau_files))"
"0",""
"0","# The for loop for cleaning and merging "
"0",""
"0","for(i in 1:length(mau_files)) {"
"0",""
"0","mau_list[[i]] <- read_csv(paste0(""./data/mpr_se_data/"", mau_files[i])) %>%"
"0","   clean_names() %>% "
"0","  rename(commodity = x1) %>% "
"0","  mutate_at(vars(-c(commodity, category)), ~ as.double(.x)) %>%"
"0","  pivot_longer(cols = -c(commodity, category), "
"0","         names_to = ""location"", values_to = ""price"") %>% "
"0","  mutate(filename = paste0(mau_files[i]),"
"0","          date = str_remove(filename, ""MPR_SE_""),"
"0","          date = str_remove(date, "".csv""), "
"0","          date = ym(date) + days(14), "
"0","          location = str_to_title(location)) %>% "
"0","   filter(!is.na(price)) %>% "
"0","   # Converting viss into kg"
"0","   mutate(price = ifelse(str_detect(commodity, ""viss""), price * 1.63293, price),"
"0","          commodity = str_replace(commodity, ""viss"", ""kg""))"
"0",""
"0","mau <- bind_rows(mau_list) %>%"
"0","   rename(admin2 = location) %>% "
"0","   left_join(prices %>% select(admin1, admin2), by = ""admin2"") %>% "
"0","   mutate(admin1 = case_when(admin2 == ""Hpapun"" ~ ""Kayin"", "
"0","                            admin2 == ""Taungoo"" ~ ""Bago"", "
"0","                            admin2 == ""Hpruso"" ~ ""Kayah"", "
"0","                            TRUE ~ admin1)) %>%"
"0","   distinct(commodity, admin1, admin2, price, date, filename) %>% "
"0","   mutate(commodity = recode(commodity, "
"0","                            ""Cheaper Rice (1 kg)"" = ""Rice (low quality)"", "
"0","                            ""Palm Oil (1 liter)"" = ""Oil (palm)"", "
"0","                            ""Pulse (1 kg)"" = ""Pulses"", "
"0","                            ""Onion (1 kg)"" = ""Onions (local)"", "
"0","                            ""Chicken (1 kg)"" = ""Meat (chicken)""), "
"0","         market = NA_real_, "
"0","         year = year(date))"
"0","}"
"0",""
"0","# shapefiles"
"0","pcode3_shape <- "
"0","  st_read(""./mmr_polbnda_adm3_mimu_250k/mmr_polbnda_adm3_mimu_250k.shp"", quiet = TRUE) %>%"
"0","  rename(state = ST, "
"0","        admin1_pcode = ST_PCODE,"
"0","        township = TS,"
"0","        admin3_pcode = TS_PCODE) %>% "
"0"," mutate(admin3_pcode = ifelse(str_detect(township, ""Hlaingtharya""), ""MMR013008"", admin3_pcode))"
"0",""
"0","pcode1_shape <- "
"0","  st_read(""./mmr_polbnda2_adm1_mimu_250k/mmr_polbnda2_adm1_mimu_250k.shp"", quiet = TRUE) %>%"
"0","  rename(state = ST, "
"0","        admin1_pcode = ST_PCODE) %>% st_as_sf()"
"0",""
"0","# Conflict score"
"0","conflict_score <- read_csv(""./data/conflict_score2.csv"")"
"0",""
"0","# Agriculture date "
"0","ag_mali <- read_csv(""./data/ag_mali.csv"")"
